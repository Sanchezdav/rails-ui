<div class="flex flex-col border border-subtle rounded-md bg-muted"
  data-controller="ui-simple-editor" <%= preview_id ? "data-preview-id=#{preview_id}" : "" %>
  data-ui-simple-editor-variables-outlet=".variables-dropdown"
>
  <div class="px-2 py-2 flex items-center justify-between">
    <div class="flex space-x-2 items-center">
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-editor-toolbar data-level="1" data-action="ui-simple-editor#toggleHeading">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heading-1"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M21 18v-8l-3 2"/></svg>
      </button>
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-level="2" data-action="ui-simple-editor#toggleHeading">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heading-2"><path d="M4 12h8"/><path d="M4 18V6"/><path d="M12 18V6"/><path d="M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"/></svg>
      </button>
      <!-- list -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="ui-simple-editor#toggleBulletList">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>
      </button>
      <!-- ordered -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="ui-simple-editor#toggleOrderedList">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-ordered"><line x1="10" x2="21" y1="6" y2="6"/><line x1="10" x2="21" y1="12" y2="12"/><line x1="10" x2="21" y1="18" y2="18"/><path d="M4 6h1v4"/><path d="M4 10h2"/><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
      </button>
      <!-- B -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="ui-simple-editor#toggleBold">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bold"><path d="M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"/></svg>
      </button>
      <!-- italic -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="ui-simple-editor#toggleItalic">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-italic"><line x1="19" x2="10" y1="4" y2="4"/><line x1="14" x2="5" y1="20" y2="20"/><line x1="15" x2="9" y1="4" y2="20"/></svg>
      </button>
      <!-- link -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="ui-simple-editor#openLinkPrompt">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
      </button>
      <div data-ui-simple-editor-target="linkWrapper" class="hidden flex items-center">
        <input data-ui-simple-editor-target="linkField" data-action="keydown.enter->ui-simple-editor#setLink" type="text">
        <button class="btn btn-xs text-xs font-bold outlined bg-default rounded-lg p-2" type="button" data-action="click->ui-simple-editor#setLink">link</button>
      </div>

      <button 
        class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" 
        type="button" 
        data-action="ui-simple-editor#uploadImage">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
      </button>
    </div>

    <% if variables.present? %>
      <!--<div class="pt-4 pb-1 w-128 h-60 overflow-auto">
        <div class="mb-2 px-4 text-left text-xs text-gray-500">
          ADD DYNAMIC TEXT VARIABLES
        </div>
        <% variables.each do |k, v| %>
          <div role="menuitem" class="focus:ring-brand-800 text-sm text-gray-700 ring-inset first-of-type:rounded-t-[inherit] last-of-type:rounded-b-[inherit] hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:ring-1 hover:ring-0" tabindex="-1" data-orientation="vertical" data-radix-collection-item="">
            <button type="button"
              data-value=" {{<%= k %>}} "
              data-action="click->ui-simple-editor#insert click->dropdown#toggle"
              class="w-full px-4 py-2">
              <div class="sm:grid sm:grid-cols-2">
                <div class="mr-3 text-left md:col-span-1">{<%= k %>}</div>
                <div class="hidden text-left text-gray-600 sm:col-span-1 sm:flex"><%= v %></div>
              </div>
            </button>
          </div>
        <% end %>
      </div>-->
    <% end %>
  </div>
  <div data-ui-simple-editor-target="editor"
    class="px-4 border-t border-subtle
     rounded-sm bg-muted prose prose-sm dark:prose-invert <%= height || "h-96" %> overflow-auto"
    style="max-width: none;">
  </div>
  <%= form.hidden_field field,
    "data-ui-simple-editor-target": "textInput",
    data: data
  %>
</div>